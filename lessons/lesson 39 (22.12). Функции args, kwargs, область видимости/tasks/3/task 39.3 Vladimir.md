# Практическое задание 3

## Задания

### Описание задачи
Реализуйте диспетчер команд `dispatch(action, *args, **kwargs)`, который принимает переменное количество позиционных и именованных аргументов и управляет внутренним состоянием списка элементов. Цель — потренировать комбинирование `*args`, `**kwargs`, распаковку при вызове и замыкание для хранения `storage`. Команды: `add`, `remove`, `stats`. Типичные ошибки: смешивать порядок позиционных и именованных аргументов, не приводить добавляемые элементы к строке, заново создавать `storage` на каждом вызове.

### Пример входных и выходных данных

```python
dispatcher = make_dispatcher()

dispatcher("add", *["alpha", "beta"], source="cli")
dispatcher("remove", item="beta")
print(dispatcher("stats", detailed=True))
# output:
# {
#     "count": 1,
#     "items": ["alpha"],
#     "preview": ["alpha"],
#     "meta": {"last_source": "cli"}
# }
```

- Подсказки: используйте `kwargs.get("detailed")` для флага, список можно хранить в замыкании через внешнюю функцию `make_dispatcher`. Проверку на пустой список при `remove` делайте заранее, чтобы избежать `ValueError`.

### Критерии проверки и ограничения
1. `add` требует хотя бы один позиционный аргумент, иначе ошибка.
2. `remove` принимает именованный аргумент `item`; при отсутствии элемента печатает предупреждение и ничего не меняет.
3. `stats` возвращает словарь с ключами `count`, `items`, дополнительно `preview`, если `detailed=True`.
4. Неизвестная команда вызывает `ValueError(f"Unknown action: {action}")`.

### Решение задачи (псевдокод)
1. Создать структуру для хранения элементов и метаданных (например, список и словарь).
2. При получении действия определить требуемую ветку.
3. Для `add`: проверить наличие позиционных аргументов, привести их к строкам, добавить в хранилище, обновить метаданные при необходимости.
4. Для `remove`: проверить, что аргумент `item` передан; если элемент найден, удалить его, иначе зафиксировать предупреждение.
5. Для `stats`: подготовить словарь с количеством и текущим списком; если флаг подробностей включен, добавить укороченный список и метаданные.
6. Если действие не распознано, остановить выполнение с ошибкой.

### Рекомендации
- Вынести в отдельную функцию: `make_dispatcher()` — возвращает замыкание `dispatch` и хранит `storage`.
- PEP8: функции и переменные пишите в snake_case, для длинных словарей используйте висячие запятые.
