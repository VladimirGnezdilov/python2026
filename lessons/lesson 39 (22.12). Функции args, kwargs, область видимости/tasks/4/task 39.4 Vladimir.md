# Практическое задание 4

## Задания

### Описание задачи
Нужно создать фабрику `make_budget_tracker(limit)`, которая возвращает функцию регистрации покупок и отслеживает остаток бюджета в локальной области видимости плюс общий глобальный счетчик `total_spent`. Цель — закрепить работу с `nonlocal` и `global`, показать различие локальных и глобальных переменных. Типичные ошибки: заново инициализировать `remaining` при каждом вызове, забыть объявить `global total_spent`, не фиксировать момент перехода в минус.

### Пример входных и выходных данных

```python
total_spent = 0

grocery_tracker = make_budget_tracker(500)
tech_tracker = make_budget_tracker(1000)

grocery_tracker(200, note="Продукты на неделю")
grocery_tracker(400)
result = tech_tracker(1200, note="Ноутбук")

print(result)
# output:
# {
#     "spent": 1200,
#     "remaining": -200,
#     "note": "Ноутбук",
#     "status": "warning"
# }
# Параллельно total_spent == 1800
```

- Подсказки: `remaining` храните в замыкании, обновляя его через `nonlocal`. Для вывода предупреждения достаточно проверять переход из неотрицательного остатка в отрицательный.

### Критерии проверки и ограничения
1. `total_spent` объявляется на уровне модуля и обновляется в каждом вызове трекера.
2. Функция внутри фабрики принимает сумму и необязательный именованный аргумент `note`.
3. Возвращаемая структура содержит поля `spent`, `remaining`, `note`, `status`, где статус `warning`, если остаток < 0.
4. При первом уходе в минус печатается сообщение с указанием перерасхода.

### Решение задачи (псевдокод)
1. Объявить глобальную переменную для суммарных расходов.
2. Фабрика принимает лимит, инициализирует остаток и создает вложенную функцию.
3. При каждом вызове вложенной функции:
   - объявить использование глобального счетчика;
   - увеличить глобальные расходы на сумму покупки;
   - уменьшить локальный остаток через `nonlocal`.
4. Определить статус в зависимости от остатка; при первом переходе в минус сформировать предупреждение.
5. Вернуть структуру с информацией о покупке.

### Рекомендации
- Вынести в отдельную функцию: `format_warning(remaining)` — формирует текст сообщения при отрицательном остатке.
- PEP8: объявление глобальных переменных размещайте в верхней части файла, а пустые строки используйте для логического разделения функций.
